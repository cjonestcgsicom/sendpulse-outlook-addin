{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/sendpulse_api.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","SendPulseClient","id","secret","baseurl","this","clientID","clientSecret","token","baseURL","getToken","callback","parameters","grant_type","client_id","client_secret","makeRequest","getAddressBooks","localStorage","getItem","url","getAddressBookContacts","bookID","addEmailsToAddressBook","emails","data","method","authorized","self","xhr","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","addEventListener","e","jsonResponse","parse","responseText","console","log","access_token"],"mappings":"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","file":"greenrope_api.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","class SendPulseClient {\n\n    private clientID: string = '';\n    private clientSecret: string = '';\n    public token: string = '';\n    public baseURL: string = '';\n\n    constructor (id: string, secret: string, baseurl: string) {\n        this.clientID = id;\n        this.clientSecret = secret;\n        this.token ='';\n        this.baseURL = baseurl;\n    }\n\n    getToken(callback) {\n\n        let parameters = {\n            'grant_type': 'client_credentials',\n            'client_id' : this.clientID,\n            'client_secret': this.clientSecret\n        };\n\n        //'https://api.sendpulse.com/oauth/access_token'\n        this.makeRequest(parameters, 'POST', this.baseURL + 'sendpulsetoken', false, callback);\n    }\n\n    getAddressBooks(callback){\n\n        this.token = localStorage.getItem(\"sendPulseToken\");\n        let parameters = {\n            'url': 'listAddressBooks',\n            'token': this.token\n        }\n        //' https://api.sendpulse.com/addressbooks'\n        this.makeRequest(parameters, 'POST', this.baseURL + 'sendpulse', true, callback);\n    }\n\n    getAddressBookContacts(bookID, callback) {\n\n        //'https://api.sendpulse.com/addressbooks/'+ bookID +'/emails';\n        this.token = localStorage.getItem(\"sendPulseToken\");\n        let parameters = {\n            'url': 'getEmailsFromBook',\n            'id' : bookID,\n            'token': this.token\n        }\n\n        this.makeRequest(parameters, 'POST', this.baseURL + 'sendpulse', true, callback);\n    }\n\n    addEmailsToAddressBook(bookID, emails, callback) {\n        this.token = localStorage.getItem(\"sendPulseToken\");\n        let parameters = {\n            'url': 'addEmails',\n            'id' : bookID,\n            'emails': emails,\n            'token': this.token\n        }\n\n        this.makeRequest(parameters, 'POST', this.baseURL + 'sendpulse', true, callback);\n    }\n\n    makeRequest(data, method: string, url: string, authorized: boolean, callback) {\n\n        let self = this;\n\n        var xhr = new XMLHttpRequest();\n        xhr.open(method, url, true);\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        if(authorized){\n            xhr.setRequestHeader('Authorization', 'Bearer ' + this.token);\n        }\n        xhr.send(JSON.stringify(data));\n\n        xhr.addEventListener('load', function(e) {\n            var jsonResponse = JSON.parse(xhr.responseText);\n            console.log(\"Response: \" + JSON.stringify(jsonResponse));\n\n            if(! (jsonResponse.access_token === null ))\n            {\n                console.log(\"Token: \" + jsonResponse.access_token);\n                self.token =  jsonResponse.access_token;\n            }\n            else {\n                console.log(\"Auth error: \" + JSON.stringify(jsonResponse));\n            }\n\n            callback(jsonResponse);\n\n        });\n\n\n    }\n\n}\n\nexport { SendPulseClient };"],"sourceRoot":""}